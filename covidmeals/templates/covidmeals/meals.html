{%  load static %}
<!DOCTYPE html>
	<head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type= "text/css" href= "{% static '/css/styles.css' %}">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	</head>
	<title>Home</title>
	<body style="margin: 5%;">
		<nav>
			<div id=navBar>
				<a href="{% url 'covidmeals:meals' %}" style="background:rgba(255, 255, 255, 0.7); color: black;">Meals</a>
				<a href="/about">About Us</a>
                <span class="w3-xxlarge"><a href="{% url 'covidmeals:index' %}" style="background:none;"><i class="fa fa-home"></i></a></span>
			</div>
		</nav>

		<section id=filterBar>
            <form action="/meals/" method="GET">
                <select id="idState" name='state' style="margin-bottom: 1em;">
					<option>State</option>
                    <option value="Karnataka">Karnataka</option>
                </select>
				<select id="idCity" name="city" style="margin-bottom: 1em;">
					<option>City</option>
                    <option value="Bangalore">Bangalore</option>
                </select>
				<select id="idArea" name="area" style="margin-bottom: 1em;">
					<option>Area</option>
                </select><br>
				<input id="searchButton" type="submit" >
            </form>
		</section>
		<p>Do you want your meal service to feature on this list? Click <a href="{% url 'covidmeals:service-data' %}">here</a> to enter details</p>
		<!-- <script id="dataIn" type="application/json"></script> -->
         <section id=infotable>
            <div class="meals-grid-container">
				<div class="meals-grid-item-header">Name</div>
				<div class="meals-grid-item-header">Phone</div>
				<!-- <div class="meals-grid-item-header">Address</div> -->
				<div class="meals-grid-item-header">Description</div>
				{{searchResults|json_script:"dataIn" }}
				<script id="jsonParser" type="application/javascript">
					// code to get info table data from db and inject data on screen
					var dataObj = document.querySelector(".meals-grid-container");
					var strData = JSON.parse(document.querySelector('#dataIn').textContent);
					var jsonData = JSON.parse(strData);
					for(const item in jsonData){
						
						const divItemName =  document.createElement("div");
						divItemName.setAttribute("class", "meals-grid-item");
						divItemName.textContent = jsonData[item]["fields"]["name"];

						const divItemPhone =  document.createElement("div");
						divItemPhone.setAttribute("class", "meals-grid-item");
						divItemPhone.textContent = jsonData[item]["fields"]["phoneNumber"];

						// const divItemAddress =  document.createElement("div");
						// divItemAddress.setAttribute("class", "meals-grid-item");
						// divItemAddress.textContent = jsonData[item]["fields"]["address"];

						const divItemDetails =  document.createElement("div");
						divItemDetails.setAttribute("class", "meals-grid-item");
						divItemDetails.textContent = jsonData[item]["fields"]["moreDetails"];

						dataObj.appendChild(divItemName);
						dataObj.appendChild(divItemPhone);
						// dataObj.appendChild(divItemAddress);
						dataObj.appendChild(divItemDetails);

					}


				</script>

			</div>
         </section>
		 <script id ="areasJson" src="../../../static/json/areas.json" type="application/json"></script>

		<script>
			var areas = {
    "Bangalore": ["Agrahara", "AGS layout", "Akshayanagar", "Akshaynagar", "Ali Askar Road", "Allalasandra", "Amrutahalli ", "Anandnagar", "Anekal", "Ashwath Nagar", "Attiguppe", "Austin Town", "Babusapalya", "Bagalgunte", "Bagalur", "Banashankari", "Banaswadi", "Bangalore South", "Bannerghatta", "Basavanagudi", "Basaveshvaranagar", "Basveshwanagar", "Begur", "BEL", "Bellandur", "Benson Town", "Bhoopasandra", "Bilekahalli", "Bilishivale", "Binnypet", "Bommanahalli", "Borewell road", "Borewell Road", "Brookefield ", "BTM Layout", "Budigere", "Carmelaram", "Central Bangalore", "Chanasandhra", "Chandra Layout", "Chikkabanavara", "Chikkabellandur", "Chikkalasandra", "Chodarapalya", "Cooke Town", "Cox Town", "Cunningham road", "CV Raman Nagar", "Deepanjalinagar", "Devarachikanahalli", "Devasandra", "Diamond district", "Doddakallasandra", "Dodsworth Layout", "Dollars Colony", "Domlur", "ECC road", "Ejipura", "Electronic City", "Fraser Town", "Ganganagar", "Geddalahalli", "Girinagar", "Gokula Extension", "Goripalya", "Gottigere", "Gunjur", "Hadosiddapura", "HAL", "Hanumanthnagar", "Hapinagar", "Haralur Road", "HBR layout", "Hebbal", "Hennur", "Hongasandra", "Hoodi", "Hope Farm", "Horamavu", "Hosa Road", "Hosakerehalli", "Hosakerihall", "Hoskerehalli", "Hoskote", "Hosur", "HRBR Layout", "HSR Layout", "Hulimavu", "Immidahalli", "Indiranagar", "ITPL", "Ittamadu", "Jakkur", "Jalahalli", "Jayanagar", "Jeevanbheema Nagar", "JP Nagar", "Kadubeesanahalli", "Kadugodi", "Kagadaspura", "Kaggadasapura", "Kaggalipura", "Kalena", "Kalkere", "Kalyan Nagar", "Kammanahalli", "Kanakapura Road", "Kasturinagar", "Kathriguppe", "Kavalbyrasandra", "Kempapura", "Kengeri", "Kodathi", "Kodigehalli", "Kogilu", "Konankunte Cross", "Koramangala", "KR Puram", "Kudlu Gate", "Kumara Park", "Kumara Park West", "Kumara Swami Layout", "Kumaraswamy Layout", "Kumbalgodu", "Kundalahalli", "Kuvempunagar", "Lingarajpuram", "Madiwala", "Magadi Road", "Mahadevapura", "Mahalakshmi Layout", "Mahalakshmi layout", "Malagala", "Mallathalli", "Malleshpalya", "Malleswaram", "Manyata Tech Park", "Marathahalli", "Maruthi Sevanagar", "Mathikere", "Millers Road", "Moodalpalya", "MS Palya", "Mudalpalya", "Munnekolala", "Murgeshpalya", "Mysore Road", "Nagadevanahalli", "Nagarbhavi", "Nagawara", "Nandi Durga Road", "Nandini Layout", "Nayandahalli", "Nelurhalli", "New BEL Road", "New Thippasandra", "Nimbekaipura", "North Bangalore", "NR Colony", "NRI Layout", "Nyanappanhalli", "Old Airport Road", "Old Madras Road", "Panathur", "Peenya", "Prashant Layout", "Prashant Nagar", "Prashanth layout", "Prashanth Layout", "Raghuvanahalli", "Rajaji Nagar", "Rajajinagar", "Rajarajeshwari Nagar", "Ramamurthy Nagar", "Richardstown", "Richmond Road", "RMV Extension", "RMV II Stage", "RPC Layout", "RT Nagar", "Sadashiv Nagar", "Sadashivnagar", "Sahakarnagar", "Sarakki", "Sarjapur", "Seegahalli", "Seegehalli", "Seshadaripuram", "Shanthivana", "Silkboard", "Singapura", "Singasandra", "South Bangalore", "Sultanpalya", "Tavarekere", "TC Palya", "Thanisandra", "Thindlu", "Thippasandra", "Tin factory", "Tyagarajanagar", "Ulsoor", "Uttarahalli", "Varthur", "Vasanth Nagar", "Vasanthapura", "Vasanthnagar", "Vidyaranyapura", "Vignan Nagar", "Vijaya Bank Layout", "Vijaynagar", "Vishwapriya layout", "VV Puram ", "Vyalikaval Layout", "Whitefield", "Wilson Garden", "Yelahanka", "Yellachanahalli", "Yeshwantpur"
    ]
}
			// var jsonObj = JSON.parse(areas); // try to import the local josn data
			var jsonObj = areas;
 			var allArea = jsonObj["Bangalore"];
			var selectArea = document.querySelector("#idArea");

			for(var i=0; i < allArea.length; i++){
				const optiontag = document.createElement("option");
				optiontag.setAttribute("value",allArea[i]);
				optiontag.textContent=allArea[i];
				selectArea.appendChild(optiontag);
			}
		 </script>
		<footer>
			{% include 'covidmeals/footer.html' %}
		</footer>
	</body>
	
	
</html>